{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\admin\\controller\\user.js"
    ],
    "names": [
        "Base",
        "require",
        "module",
        "exports",
        "indexAction",
        "page",
        "get",
        "size",
        "name",
        "model",
        "data",
        "where",
        "username",
        "order",
        "countSelect",
        "success",
        "memberInfoAction",
        "isPost",
        "join",
        "user",
        "on",
        "select",
        "infoAction",
        "id",
        "find",
        "storeAction",
        "level_id",
        "post",
        "update",
        "user_level_id",
        "destroyAction",
        "limit",
        "delete",
        "addAction",
        "max",
        "insertData",
        "password",
        "gender",
        "birthday",
        "register_time",
        "last_login_time",
        "last_login_ip",
        "nickname",
        "mobile",
        "register_ip",
        "avater",
        "weixin_openid",
        "add",
        "description"
    ],
    "mappings": "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",
    "file": "..\\..\\..\\src\\admin\\controller\\user.js",
    "sourcesContent": [
        "const Base = require('./base.js');\n\nmodule.exports = class extends Base {\n  /**\n   * index action\n   * @return {Promise} []\n   */\n  async indexAction() {\n    const page = this.get('page') || 1;\n    const size = this.get('size') || 10;\n    const name = this.get('name') || '';\n\n    const model = this.model('user');\n    const data = await model.where({username: ['like', `%${name}%`]}).order(['id DESC']).page(page, size).countSelect();\n\n    return this.success(data);\n  }\n\n  async memberInfoAction() {\n    if (!this.isPost) {\n      return false;\n    }\n    const data = await this.model('vip').join({user:{join:'inner',on:['id','user_level_id']}}).select()\n    return this.success(data)\n  }\n\n  async infoAction() {\n    const id = this.get('id');\n    const model = this.model('user');\n    const data = await model.where({id: id}).find();\n\n    return this.success(data);\n  }\n\n  async storeAction() {\n    if (!this.isPost) {\n      return false;\n    }\n\n    const level_id = this.post('level_id');\n    const id = this.post('id');\n\n    const model = this.model('user');\n    await model.where({id: id}).update({user_level_id:level_id});\n    let data = await this.model('vip').where({id:level_id}).find()\n    return this.success(data);\n  }\n\n  async destroyAction() {\n    const id = this.post('id');\n    await this.model('user').where({id: id}).limit(1).delete();\n    // TODO 删除图片\n\n    return this.success();\n  }\n\n  async addAction() {\n    if (!this.isPost) {\n      return false;\n    }\n    const id = await this.model('user').max('id')\n    const username = this.post('username')\n    const level_id = this.post('level_id')\n    let insertData = {id:(id+1),username:username,password:'',gender:0,birthday:0,register_time:0,last_login_time:0,last_login_ip:'',user_level_id:level_id,nickname:username,mobile:'',register_ip:'',avater:'',weixin_openid:''}\n    await this.model('user').add(insertData)\n    const data = await this.model('vip').where({id:level_id}).find()\n    insertData.name = data.name\n    insertData.description= data.description\n    return this.success(insertData)\n  }\n};\n"
    ]
}